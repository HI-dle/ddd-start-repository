# 2.7 모듈 구성

아키텍처의 각 영역은 별도 패키지에 위치합니다.

패키지 구성 규칙에 정답이 존재하는 것은 아니지만, 아래 그림과 같이 영역별로 모듈이 위치할 패키지를 구성할 수 있을 것입니다.

![2-21.png](image%2F2-21.png)

도메인이 크면 아래 그림과 같이 하위 도메인으로 나누고, 각 하위 도메인마다 별도 패키지를 구성합니다.

![2-22.png](image%2F2-22.png)

> 도메인 별로 `ui, application, domain, infrastructure` 패키지를 구성.

도메인 모듈은 도메인에 속한 애그리거트를 기준으로 다시 패키지를 구성합니다. 예를 들어 위 `catalog` 도메인의 하위 도메인이 `product`애그리거트와 `category` 애그리거트로 구성될 경우 아래 그림과 같이 패키지를 구성할 수 있습니다.

![2-23.png](image%2F2-23.png)
> 하위 도메인을 하위 패키지로 구성한 모듈 구조

---
애그리거트, 모델, 리포지토리(repository)는 같은 패키지에 위치 시킵니다. 

```markdown
예시) 주문과 관련된 애그리거트, 모델, 리포지토리를 domain 패키지에 위치

- order
    - domain
        - Order
        - OrderLine
        - Orderer
        - OrderRepository
```

도메인이 복잡하면 도메인 모델과 도메인 서비스를 다음과 같이 별도 패키지에 위치시킬 수도 있습니다.
- `com.rouby.order.domain.order`: 애그리거트 위치
- `com.rouby.order.domain.service`: 도메인 서비스 위치

응용 서비스도 다음과 같이 도메인 별로 패키지를 구분할 수 있습니다.
- `com.rouby.catalog.application.product`
- `com.rouby.catalog.application.catagory`

모듈 구조를 얼마나 세분화해야 하는지에 대해 정해진 규칙은 없습니다. 한 패키지에 너무 많은 타입이 몰려서 코드를 찾을 때 불편한 정도만 아니면 됩니다.

> 책의 저자이신 최범균님은 한 패키지에 가능하면 10~15개 미만으로 타입 개수를 유지하려고 노력하신다고 하고, 해당 개수가 넘어가면 패키지를 분리하는 시도를 하신다고 합니다.
> 
> 여기서 말하는 타입의 개수라 함은 클래스, 인터페이스, enum을 포함한 파일을 의미하는 것으로 이해했습니다.

